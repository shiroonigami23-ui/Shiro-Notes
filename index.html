<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shiro Notes - Professional Note-Taking</title>
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EðŸ“%3C/text%3E%3C/svg%3E">

    <!-- Modular CSS Files -->
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="layout.css">
    <link rel="stylesheet" href="components.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="editor.css">     <!-- Consolidated editor styles -->
    <link rel="stylesheet" href="search.css">
    <link rel="stylesheet" href="security.css">
    <link rel="stylesheet" href="calendar.css">
    <link rel="stylesheet" href="canvas.css">     <!-- Consolidated canvas styles -->
    <link rel="stylesheet" href="audio.css">
    <link rel="stylesheet" href="profile.css">
    <link rel="stylesheet" href="export.css">
    <!-- Add links for templates.css if created, etc. -->

</head>
<body>

    <!-- Main Application Structure -->
    <div id="app" class="app">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-feather-alt"></i>
                    <span class="logo-text">Shiro Notes</span> <!-- Added class for collapsing -->
                </div>
                <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle Sidebar">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-title">Main</h3>
                    <button class="nav-item active" data-page="dashboard" title="Dashboard">
                        <i class="fas fa-home fa-fw"></i> <!-- Added fa-fw for fixed width -->
                        <span class="nav-text">Dashboard</span>
                    </button>
                    <button class="nav-item" data-page="books" title="Books">
                        <i class="fas fa-book fa-fw"></i>
                        <span class="nav-text">Books</span>
                        <span class="count" id="booksCount">0</span>
                    </button>
                    <button class="nav-item" data-page="notes" title="All Notes">
                        <i class="fas fa-sticky-note fa-fw"></i>
                        <span class="nav-text">All Notes</span>
                        <span class="count" id="notesCount">0</span>
                    </button>
                    <button class="nav-item" data-page="canvas" title="Canvas">
                        <i class="fas fa-paint-brush fa-fw"></i>
                        <span class="nav-text">Canvas</span>
                    </button>
                    <button class="nav-item" data-page="audio" title="Audio Notes">
                        <i class="fas fa-microphone fa-fw"></i>
                        <span class="nav-text">Audio Notes</span>
                    </button>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-title">Organization</h3>
                    <button class="nav-item" data-page="search" title="Search">
                        <i class="fas fa-search fa-fw"></i>
                        <span class="nav-text">Search</span>
                    </button>
                    <button class="nav-item" data-page="bookmarks" title="Bookmarks">
                        <i class="fas fa-bookmark fa-fw"></i>
                        <span class="nav-text">Bookmarks</span>
                    </button>
                    <button class="nav-item" data-page="tags" title="Tags">
                        <i class="fas fa-tags fa-fw"></i>
                        <span class="nav-text">Tags</span>
                    </button>
                    <button class="nav-item" data-page="templates" title="Templates">
                        <i class="fas fa-file-alt fa-fw"></i>
                        <span class="nav-text">Templates</span>
                    </button>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-title">Tools</h3>
                    <button class="nav-item" data-page="scheduler" title="Calendar">
                        <i class="fas fa-calendar-alt fa-fw"></i>
                        <span class="nav-text">Calendar</span>
                    </button>
                    <button class="nav-item" data-page="export" title="Export & Backup">
                        <i class="fas fa-file-export fa-fw"></i>
                        <span class="nav-text">Export</span>
                    </button>
                     <button class="nav-item" data-page="security" title="Security Settings">
                        <i class="fas fa-shield-alt fa-fw"></i>
                        <span class="nav-text">Security</span>
                    </button>
                </div>
            </nav>

            <div class="sidebar-footer">
                <button class="nav-item" data-page="profile" title="Profile & Settings">
                    <div class="profile-avatar" id="sidebarAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span class="nav-text">Profile</span>
                </button>
                <!-- Theme toggle can be added here if desired -->
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="top-bar-left">
                    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle Menu">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="breadcrumb" id="breadcrumb">
                        <span>Dashboard</span>
                    </div>
                </div>

                <div class="top-bar-center">
                    <div class="quick-search">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" placeholder="Quick search..." id="quickSearch" aria-label="Quick Search">
                    </div>
                </div>

                <div class="top-bar-right">
                    <button class="action-btn" id="quickNote" title="New Quick Note (Ctrl+N)">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="action-btn" id="fullScreenBtn" title="Toggle Full Screen">
                        <i class="fas fa-expand"></i>
                    </button>
                    <!-- Add theme toggle button here if preferred over sidebar -->
                </div>
            </div>

            <!-- Page Container -->
            <div class="page-container" id="pageContainer">
                <!-- Pages will be loaded here by JavaScript -->
                <div class="page active" id="dashboardPage"></div>
                <div class="page" id="booksPage"></div>
                <div class="page" id="notesPage"></div>
                <div class="page" id="canvasPage"></div>
                <div class="page" id="audioPage"></div>
                <div class="page" id="searchPage"></div>
                <div class="page" id="bookmarksPage"></div>
                <div class="page" id="tagsPage"></div>
                <div class="page" id="templatesPage"></div>
                <div class="page" id="schedulerPage"></div>
                <div class="page" id="exportPage"></div>
                <div class="page" id="securityPage"></div>
                <div class="page" id="profilePage"></div>
            </div>
        </div>
    </div>

    <!-- Modals and Overlays -->
    <div class="quick-note-popup hidden" id="quickNotePopup" role="dialog" aria-modal="true" aria-labelledby="quickNoteTitleLabel">
        <div class="modal-content quick-note-container">
            <div class="modal-header">
                <h3 id="quickNoteTitleLabel">Quick Note</h3>
                <button class="close-btn" id="closeQuickNote" aria-label="Close Quick Note">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body quick-note-body">
                <input type="text" placeholder="Note title..." id="quickNoteTitle" aria-label="Note Title">
                <textarea placeholder="Write your note..." id="quickNoteContent" aria-label="Note Content"></textarea>
            </div>
            <div class="modal-footer quick-note-footer">
                <button class="btn btn--secondary" id="cancelQuickNote">Cancel</button>
                <button class="btn btn--primary" id="saveQuickNote">Save Note</button>
            </div>
        </div>
    </div>

    <div class="toast-container" id="toastContainer" aria-live="assertive"></div>

    <div class="loading-overlay hidden" id="loadingOverlay" role="alert" aria-busy="true">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
            <span class="sr-only">Loading...</span>
        </div>
    </div>

    <!-- Modular JavaScript Files (Order is important!) -->

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script> <!-- Added CryptoJS -->
    <!-- JSZip is loaded dynamically in export.js -->

    <!-- Core App Logic & Utilities -->
    <script src="app.js"></script>          <!-- Main coordinator (needs window.app first) -->
    <script src="ui.js"></script>           <!-- General UI interactions -->
    <script src="crypto.js"></script>       <!-- Core crypto functions -->
    <script src="dashboard.js"></script>    <!-- Dashboard specific logic -->

    <!-- Editor Modules (Sub-modules first, then coordinator) -->
    <script src="editor_core.js"></script>
    <script src="editor_toolbar.js"></script>
    <script src="editor_features.js"></script>
    <script src="item_editor.js"></script>
    <script src="editor.js"></script>        <!-- Editor coordinator -->

    <!-- Canvas Modules (Sub-modules first, then coordinator) -->
    <script src="canvas_core.js"></script>
    <script src="canvas_tools.js"></script>
    <script src="canvas_ui.js"></script>
    <script src="canvas.js"></script>        <!-- Canvas coordinator -->

    <!-- Other Feature Modules -->
    <script src="security.js"></script>     <!-- Handles security UI, uses crypto.js -->
    <script src="autoencryption.js"></script><!-- Uses crypto.js and CryptoJS -->
    <script src="search.js"></script>
    <script src="scheduler.js"></script>
    <script src="audio.js"></script>
    <script src="export.js"></script>       <!-- Loads JSZip dynamically -->
    <script src="templates.js"></script>
    <script src="profile.js"></script>
    <script src="keyboard.js"></script>     <!-- Global keyboard shortcuts -->

    <!-- Initialization Script (Optional - app.js constructor calls init) -->
    <!-- <script> document.addEventListener('DOMContentLoaded', () => { window.app.init(); }); </script> -->

</body>
</html>

